// Generated by CoffeeScript 1.3.3
(function() {

  $(function() {
    var App;
    App = Em.Application.create({
      rootElement: '#content'
    });
    App.Router = Em.Router.extend({
      enableLogging: true,
      location: 'hash',
      root: Em.Route.extend({
        goToUser: Em.route.transitionTo('user'),
        index: Em.Route.extend({
          route: '/',
          redirectsTo: 'users'
        }),
        users: Em.Route.extend({
          route: '/user',
          index: Em.Route.extend({
            route: '/'
          }),
          user: Em.Route.extend({
            route: '/:id',
            connectOutlets: function(router, context) {
              return route.get('applicationController').connectOutlet(App.UserDetailsView, App.userController.loadUser(context.id));
            }
          })
        })
      })
    });
    App.User = Em.Object.extend({
      id: '',
      full_name: '',
      disp_name: '',
      charities: [],
      races: [],
      img: null
    });
    App.ApplicationView = Ember.View.extend({
      templateName: 'application'
    });
    App.UserDetailsView = Em.View.extend({
      template: Handlebars.compile(($.ajax({
        url: "/static/views/user-details.ember.handlebars",
        async: false
      }).responseText))
    });
    App.ApplicationController = Em.Controller.extend();
    App.userController = Em.ObjectController.extend({
      content: null,
      loadUser: function(id) {
        var me, url;
        me = this;
        url = "/static/js/pymwyfa_stub.json?v=" + id;
        return $.getJSON(url, function(data) {
          var u, userData;
          me.set('content', null);
          userData = data.user_pages[id].info;
          u = App.User.create(userData);
          return me.set('content', u);
        });
      }
    });
    window.App = App;
    return App.initialize();
  });

}).call(this);
